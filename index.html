<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Wars ðŸ¦žðŸ”¥</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --bg: #0a0a0f;
            --card-bg: #12121a;
            --border: #1e1e2e;
            --primary: #ff6b35;
            --primary-glow: rgba(255, 107, 53, 0.4);
            --secondary: #ff8c42;
            --text: #e0e0e0;
            --text-muted: #6b6b7b;
            --success: #00d395;
            --danger: #ff4757;
            --warning: #ffa502;
        }
        
        * { box-sizing: border-box; }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Outfit', sans-serif;
            margin: 0;
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at top, rgba(255, 107, 53, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at bottom, rgba(255, 140, 66, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 50, 0, 0.03) 0%, transparent 40%);
        }
        
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        .lava-glow {
            box-shadow: 0 0 30px var(--primary-glow), 0 0 60px rgba(255, 107, 53, 0.2);
        }
        
        .lava-text {
            background: linear-gradient(135deg, #ff6b35, #ff8c42, #ffaa00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        
        .crypto-btn {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .crypto-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.3);
        }
        
        .price-up { color: var(--success); }
        .price-down { color: var(--danger); }
        
        @keyframes pulse-lava {
            0%, 100% { box-shadow: 0 0 20px var(--primary-glow); }
            50% { box-shadow: 0 0 40px var(--primary-glow), 0 0 60px rgba(255, 140, 66, 0.3); }
        }
        
        .pulsing { animation: pulse-lava 2s infinite; }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .fire-flicker { animation: flicker 0.5s infinite; }
        
        .location-badge {
            background: linear-gradient(135deg, #ff6b35, #ff4500);
        }
        
        .upgrade-item {
            transition: all 0.2s;
        }
        
        .upgrade-item:hover {
            background: rgba(255, 107, 53, 0.1);
        }
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 1rem;
        }
        
        .modal-body {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect, createElement: h } = React;
        
        // === CRYPTOCURRENCIES ===
        const CRYPTOS = {
            BTC: { name: 'Bitcoin', symbol: 'BTC', icon: 'â‚¿', color: '#f7931a', basePrice: 42000, volatility: 0.15 },
            ETH: { name: 'Ethereum', symbol: 'ETH', icon: 'Îž', color: '#627eea', basePrice: 2500, volatility: 0.18 },
            SOL: { name: 'Solana', symbol: 'SOL', icon: 'â—Ž', color: '#00ffa3', basePrice: 95, volatility: 0.25 },
            ADA: { name: 'Cardano', symbol: 'ADA', icon: 'â‚³', color: '#0033ad', basePrice: 0.55, volatility: 0.22 },
            DOGE: { name: 'Dogecoin', symbol: 'DOGE', icon: 'Ã', color: '#c2a633', basePrice: 0.08, volatility: 0.35 },
            XRP: { name: 'Ripple', symbol: 'XRP', icon: 'âœ•', color: '#23292f', basePrice: 0.62, volatility: 0.20 },
            LINK: { name: 'Chainlink', symbol: 'LINK', icon: 'â¬¡', color: '#375bd2', basePrice: 15, volatility: 0.23 },
            UNI: { name: 'Uniswap', symbol: 'UNI', icon: 'ðŸ¦„', color: '#ff007a', basePrice: 7, volatility: 0.28 }
        };
        
        // === EXCHANGES ===
        const EXCHANGES = [
            { name: 'Coinbase', fee: 0.006, risk: 0.1, description: 'Reliable & regulated' },
            { name: 'Binance', fee: 0.004, risk: 0.15, description: 'Low fees, high liquidity' },
            { name: 'Kraken', fee: 0.005, risk: 0.08, description: 'Best security' },
            { name: 'DEX', fee: 0.008, risk: 0.25, description: 'No KYC, max privacy' }
        ];
        
        // === LOCATIONS ===
        const LOCATIONS = [
            { name: 'New York', icon: 'ðŸ—½', risk: 0.1, description: 'Financial hub' },
            { name: 'Miami', icon: 'ðŸŒ´', risk: 0.2, description: 'Crypto paradise' },
            { name: 'Los Angeles', icon: 'ðŸŒ´', risk: 0.25, description: 'Tech & celebrities' },
            { name: 'Chicago', icon: 'ðŸŒ¬ï¸', risk: 0.3, description: 'Volatile markets' },
            { name: 'Dallas', icon: 'ðŸ¤ ', risk: 0.15, description: 'Energy & stable' },
            { name: 'Las Vegas', icon: 'ðŸŽ°', risk: 0.5, description: 'High risk, high reward' },
            { name: 'Seattle', icon: 'â˜”', risk: 0.1, description: 'Tech insider info' },
            { name: 'London', icon: 'ðŸ‡¬ðŸ‡§', risk: 0.2, description: 'European markets' }
        ];
        
        // === UPGRADES ===
        const UPGRADES = {
            wallet: { name: 'Wallet+', description: '+100 capacity', cost: 500, max: 5 },
            vpn: { name: 'VPN Shield', description: 'SEC protection', cost: 1000, oneTime: true },
            hardware: { name: 'Hardware Wallet', description: 'Hack protection', cost: 2000, oneTime: true },
            premium: { name: 'Exchange Premium', description: '50% fee discount', cost: 3000, oneTime: true },
            whale: { name: 'Whale Status', description: 'Exclusive deals', cost: 10000, oneTime: true },
            jet: { name: 'Private Jet', description: 'Travel = instant', cost: 25000, oneTime: true }
        };
        
        // === GAME CONSTANTS ===
        const GAME_DAYS = 30;
        const INITIAL_CASH = 5000;
        const INITIAL_DEBT = 50000;
        const DAILY_DEBT_INTEREST = 0.03;
        
        function App() {
            // === STATE ===
            const [day, setDay] = useState(1);
            const [cash, setCash] = useState(INITIAL_CASH);
            const [debt, setDebt] = useState(INITIAL_DEBT);
            const [portfolio, setPortfolio] = useState({});
            const [prices, setPrices] = useState(() => {
                const initial = {};
                Object.entries(CRYPTOS).forEach(([sym, info]) => {
                    initial[sym] = info.basePrice;
                });
                return initial;
            });
            const [currentExchange, setCurrentExchange] = useState(EXCHANGES[0]);
            const [currentLocation, setCurrentLocation] = useState(LOCATIONS[0]);
            const [upgrades, setUpgrades] = useState({});
            const [log, setLog] = useState(['ðŸ¦ž Welcome to Crypto Wars!', 'ðŸ”¥ Molten edition - make it hot!', `Day 1 - $${INITIAL_CASH} cash, $${INITIAL_DEBT} debt`]);
            const [showModal, setShowModal] = useState(null);
            const [walletCapacity, setWalletCapacity] = useState(100);
            
            const addLog = (msg) => setLog(l => [msg, ...l].slice(0, 12));
            
            // === HELPERS ===
            const getPortfolioValue = () => {
                return Object.entries(portfolio).reduce((sum, [sym, qty]) => {
                    return sum + (qty * prices[sym]);
                }, 0);
            };
            
            const getNetWorth = () => cash + getPortfolioValue() - debt;
            
            const getTotalCrypto = () => {
                return Object.values(portfolio).reduce((sum, qty) => sum + qty, 0);
            };
            
            const getCapacity = () => {
                let cap = walletCapacity;
                cap += (upgrades.wallet || 0) * 100;
                return cap;
            };
            
            const getFeeRate = () => {
                let fee = currentExchange.fee;
                if (upgrades.premium) fee *= 0.5;
                return fee;
            };
            
            // === PRICE FLUCTUATION ===
            const fluctuatePrices = () => {
                const newPrices = {};
                const locationMultiplier = 1 + (currentLocation.risk * (Math.random() - 0.5) * 0.5);
                
                Object.entries(CRYPTOS).forEach(([sym, info]) => {
                    const volatility = info.volatility;
                    const change = (Math.random() - 0.5) * 2 * volatility * locationMultiplier;
                    const clampedChange = Math.max(-0.4, Math.min(0.6, change));
                    newPrices[sym] = Math.max(info.basePrice * 0.2, prices[sym] * (1 + clampedChange));
                });
                setPrices(newPrices);
                return newPrices;
            };
            
            // === RANDOM EVENTS ===
            const getRandomEvent = () => {
                const events = [
                    { text: 'ðŸ‹ Whale moved the market!', effect: 'pump' },
                    { text: 'ðŸ“¢ Elon tweeted...', effect: 'pump' },
                    { text: 'ðŸŽ“ SEC made a statement.', effect: 'crash' },
                    { text: 'ðŸ”¥ Major hack revealed!', effect: 'crash' },
                    { text: 'ðŸŒŠ Bull run!', effect: 'pump' },
                    { text: 'ðŸ“‰ Liquidation cascade!', effect: 'crash' },
                    { text: 'ðŸŽ Airdrop received!', effect: 'airdrop' },
                    { text: 'ðŸ’Ž Diamond hands!', effect: 'pump' },
                    { text: 'ðŸ• Doge is pumping!', effect: 'doge' },
                    { text: 'ðŸ”Œ Exchange outage!', effect: 'crash' },
                    { text: 'ðŸ¦ Fed announcement', effect: 'mixed' },
                    { text: 'ðŸŒ Global markets rally', effect: 'pump' }
                ];
                
                const event = events[Math.floor(Math.random() * events.length)];
                return event;
            };
            
            const applyEvent = (event) => {
                const newPrices = { ...prices };
                
                switch(event.effect) {
                    case 'pump':
                        Object.keys(newPrices).forEach(sym => {
                            newPrices[sym] *= 1 + (Math.random() * 0.3 + 0.1);
                        });
                        addLog(`ðŸ”¥ ${event.text} Prices up 10-40%!`);
                        break;
                    case 'crash':
                        Object.keys(newPrices).forEach(sym => {
                            newPrices[sym] *= 1 - (Math.random() * 0.25 + 0.1);
                        });
                        addLog(`ðŸ’€ ${event.text} Prices down 10-35%!`);
                        break;
                    case 'airdrop':
                        const airdrop = Math.random() * 500 + 100;
                        setCash(c => c + airdrop);
                        addLog(`ðŸŽ ${event.text} +$${airdrop.toFixed(0)}!`);
                        break;
                    case 'doge':
                        if (newPrices.DOGE) newPrices.DOGE *= 2;
                        addLog(`ðŸ• ${event.text} DOGE 2x!`);
                        break;
                    case 'mixed':
                        Object.keys(newPrices).forEach(sym => {
                            newPrices[sym] *= 1 + (Math.random() - 0.5) * 0.3;
                        });
                        addLog(`âš–ï¸ ${event.text} Mixed movement!`);
                        break;
                }
                setPrices(newPrices);
            };
            
            // === NEXT DAY ===
            const nextDay = () => {
                // Apply interest
                const interest = debt * DAILY_DEBT_INTEREST;
                setDebt(d => d + interest);
                
                // Fluctuate prices
                fluctuatePrices();
                
                // Random event (30% chance)
                if (Math.random() < 0.3) {
                    const event = getRandomEvent();
                    applyEvent(event);
                }
                
                // Check upgrades
                if (upgrades.vpn && Math.random() < 0.1) {
                    addLog('ðŸ›¡ï¸ VPN protected you from SEC!');
                }
                
                if (upgrades.hardware && Math.random() < 0.05) {
                    addLog('ðŸ” Hardware wallet blocked a hack!');
                }
                
                setDay(d => d + 1);
                addLog(`ðŸ“… Day ${day + 1} - Interest: $${interest.toFixed(0)}`);
            };
            
            // === BUY ===
            const buy = (symbol) => {
                const fee = getFeeRate();
                const price = prices[symbol] * (1 + fee);
                const maxQty = Math.floor(cash / price);
                const capacity = getCapacity() - getTotalCrypto();
                
                if (maxQty <= 0) {
                    addLog(`âŒ Not enough cash to buy ${symbol}!`);
                    return;
                }
                
                if (capacity <= 0) {
                    addLog(`âŒ Wallet full! Upgrade capacity.`);
                    return;
                }
                
                const qty = prompt(`Buy ${symbol}?\nMax: ${maxQty.toFixed(4)}\nPrice: $${price.toFixed(2)}\nFee: ${(fee * 100).toFixed(1)}%`, Math.min(maxQty, capacity));
                
                if (qty && !isNaN(qty) && qty > 0) {
                    const amount = Math.min(parseFloat(qty), maxQty, capacity);
                    const cost = amount * price;
                    setCash(c => c - cost);
                    setPortfolio(p => ({...p, [symbol]: (p[symbol] || 0) + amount}));
                    addLog(`âœ… Bought ${amount.toFixed(4)} ${symbol} for $${cost.toFixed(2)}`);
                }
            };
            
            // === SELL ===
            const sell = (symbol) => {
                const qty = portfolio[symbol] || 0;
                if (qty <= 0) {
                    addLog(`âŒ No ${symbol} to sell!`);
                    return;
                }
                
                const fee = getFeeRate();
                const price = prices[symbol] * (1 - fee);
                
                const sellQty = prompt(`Sell ${symbol}?\nOwned: ${qty.toFixed(4)}\nPrice: $${price.toFixed(2)}`, qty);
                
                if (sellQty && !isNaN(sellQty) && sellQty > 0) {
                    const amount = Math.min(parseFloat(sellQty), qty);
                    const revenue = amount * price;
                    setCash(c => c + revenue);
                    setPortfolio(p => ({...p, [symbol]: p[symbol] - amount}));
                    addLog(`ðŸ’° Sold ${amount.toFixed(4)} ${symbol} for $${revenue.toFixed(2)}`);
                }
            };
            
            // === PAY DEBT ===
            const payDebt = () => {
                const maxPay = Math.min(cash, debt);
                const pay = prompt(`Pay debt?\nOwed: $${debt.toFixed(0)}\nCash: $${cash.toFixed(0)}`, Math.floor(maxPay));
                
                if (pay && !isNaN(pay) && pay > 0) {
                    const amount = Math.min(parseFloat(pay), cash, debt);
                    setCash(c => c - amount);
                    setDebt(d => d - amount);
                    addLog(`ðŸ’³ Paid $${amount.toFixed(0)} toward debt`);
                }
            };
            
            // === BUY UPGRADE ===
            const buyUpgrade = (key) => {
                const upgrade = UPGRADES[key];
                if (!upgrade) return;
                
                if (cash < upgrade.cost) {
                    addLog(`âŒ Need $${upgrade.cost} for ${upgrade.name}`);
                    return;
                }
                
                if (upgrade.oneTime && upgrades[key]) {
                    addLog(`âŒ Already have ${upgrade.name}!`);
                    return;
                }
                
                if (upgrade.max && (upgrades[key] || 0) >= upgrade.max) {
                    addLog(`âŒ Max level reached for ${upgrade.name}!`);
                    return;
                }
                
                setCash(c => c - upgrade.cost);
                setUpgrades(u => ({...u, [key]: (u[key] || 0) + 1}));
                addLog(`ðŸ”§ Purchased ${upgrade.name}!`);
            };
            
            // === TRAVEL ===
            const travel = (location) => {
                if (upgrades.jet) {
                    setCurrentLocation(location);
                    addLog(`âœˆï¸ Jet to ${location.icon} ${location.name}!`);
                    return;
                }
                
                nextDay();
                setCurrentLocation(location);
                addLog(`âœˆï¸ Traveled to ${location.icon} ${location.name} (-1 day)`);
            };
            
            // === GAME OVER ===
            const isGameOver = day > GAME_DAYS;
            const netWorth = getNetWorth();
            const score = Math.min(100, Math.max(0, (netWorth / 50000) * 100));
            
            if (isGameOver) {
                return h('div', { className: 'modal-overlay' },
                    h('div', { className: 'modal-body text-center animate__animated animate__fadeIn' },
                        h('h1', { className: 'text-4xl font-black mb-4 lava-text' }, 'ðŸ”¥ GAME OVER ðŸ”¥'),
                        h('p', { className: 'text-xl mb-2' }, `Survived ${GAME_DAYS} days`),
                        h('p', { className: 'text-2xl font-bold mb-2' }, `Final Net Worth: $${netWorth.toFixed(2)}`),
                        h('p', { className: 'text-3xl font-black mb-6', style: { color: netWorth >= 0 ? 'var(--success)' : 'var(--danger)' } }, 
                            netWorth >= 0 ? `PROFIT! Score: ${score.toFixed(1)}/100` : 'BANKRUPT! ðŸ’€'
                        ),
                        h('button', { 
                            onClick: () => window.location.reload(),
                            className: 'px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold rounded-xl text-xl hover:scale-105 transition-transform'
                        }, 'ðŸ”¥ Play Again')
                    )
                );
            }
            
            // === RENDER ===
            return h('div', { className: 'min-h-screen p-4 md:p-6' },
                h('div', { className: 'max-w-5xl mx-auto' },
                    // HEADER
                    h('div', { className: 'text-center mb-6' },
                        h('h1', { className: 'text-4xl md:text-5xl font-black tracking-tight mb-2' }, 
                            h('span', { className: 'lava-text' }, 'CRYPTO WARS')
                        ),
                        h('div', { className: 'flex justify-center gap-3 text-sm mono', style: { color: 'var(--text-muted)' } },
                            h('span', { className: 'fire-flicker' }, `ðŸ”¥ Day ${day}/${GAME_DAYS}`),
                            h('span', null, currentLocation.icon + ' ' + currentLocation.name),
                            h('span', null, currentExchange.name)
                        )
                    ),
                    
                    // STATS
                    h('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-3 mb-5' },
                        h('div', { className: 'card text-center py-3' }, 
                            h('p', { className: 'text-xs uppercase', style: { color: 'var(--text-muted)' } }, 'Cash'), 
                            h('p', { className: 'text-lg font-bold mono', style: { color: 'var(--success)' } }, '$' + cash.toFixed(0))
                        ),
                        h('div', { className: 'card text-center py-3' }, 
                            h('p', { className: 'text-xs uppercase', style: { color: 'var(--text-muted)' } }, 'Debt'), 
                            h('p', { className: 'text-lg font-bold mono', style: { color: debt > INITIAL_DEBT ? 'var(--danger)' : 'var(--warning)' } }, '$' + debt.toFixed(0))
                        ),
                        h('div', { className: 'card text-center py-3' }, 
                            h('p', { className: 'text-xs uppercase', style: { color: 'var(--text-muted)' } }, 'Portfolio'), 
                            h('p', { className: 'text-lg font-bold mono' }, '$' + getPortfolioValue().toFixed(0))
                        ),
                        h('div', { className: 'card text-center py-3' }, 
                            h('p', { className: 'text-xs uppercase', style: { color: 'var(--text-muted)' } }, 'Net Worth'), 
                            h('p', { className: 'text-lg font-bold mono', style: { color: netWorth >= 0 ? 'var(--success)' : 'var(--danger)' } }, '$' + netWorth.toFixed(0))
                        )
                    ),
                    
                    // QUICK ACTIONS
                    h('div', { className: 'flex gap-2 mb-5 overflow-x-auto flex-wrap' },
                        h('button', { onClick: () => setShowModal('travel'), className: 'px-4 py-2 bg-gray-800 rounded-lg font-bold text-sm' }, 'âœˆï¸ Travel'),
                        h('button', { onClick: () => setShowModal('upgrades'), className: 'px-4 py-2 bg-purple-600 rounded-lg font-bold text-sm' }, 'ðŸ”§ Upgrades'),
                        h('button', { onClick: () => setShowModal('exchange'), className: 'px-4 py-2 bg-gray-700 rounded-lg font-bold text-sm' }, currentExchange.name),
                        h('button', { onClick: () => setShowModal('portfolio'), className: 'px-4 py-2 bg-gray-700 rounded-lg font-bold text-sm' }, 'ðŸ“Š Portfolio')
                    ),
                    
                    // MARKET
                    h('div', { className: 'mb-5' },
                        h('h2', { className: 'text-xl font-bold mb-3' }, 'ðŸ“ˆ Market'),
                        h('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-3' },
                            Object.entries(CRYPTOS).map(([symbol, info]) => {
                                const price = prices[symbol];
                                const basePrice = info.basePrice;
                                const change = ((price - basePrice) / basePrice) * 100;
                                const owned = portfolio[symbol] || 0;
                                const value = owned * price;
                                
                                return h('div', { key: symbol, className: 'crypto-btn' },
                                    h('div', { className: 'flex justify-between items-start mb-2' },
                                        h('div', { className: 'flex items-center gap-1' },
                                            h('span', { className: 'text-xl', style: { color: info.color } }, info.icon),
                                            h('span', { className: 'font-bold text-sm' }, symbol)
                                        ),
                                        h('span', { className: `text-xs mono ${change >= 0 ? 'price-up' : 'price-down'}` }, 
                                            `${change >= 0 ? '+' : ''}${change.toFixed(1)}%`
                                        )
                                    ),
                                    h('p', { className: 'text-lg font-bold mono mb-1' }, '$' + price.toFixed(price < 1 ? 4 : 0)),
                                    owned > 0 && h('p', { className: 'text-xs mb-2', style: { color: 'var(--text-muted)' } }, 
                                        owned.toFixed(2) + ' = $' + value.toFixed(0)
                                    ),
                                    h('div', { className: 'flex gap-1' },
                                        h('button', { 
                                            onClick: () => buy(symbol),
                                            className: 'flex-1 py-1.5 bg-green-600 text-white rounded text-xs font-bold hover:bg-green-500'
                                        }, 'Buy'),
                                        h('button', { 
                                            onClick: () => sell(symbol),
                                            className: 'flex-1 py-1.5 bg-red-600 text-white rounded text-xs font-bold hover:bg-red-500',
                                            disabled: owned <= 0
                                        }, 'Sell')
                                    )
                                );
                            })
                        )
                    ),
                    
                    // ACTIONS
                    h('div', { className: 'grid grid-cols-2 gap-3 mb-5' },
                        h('button', { 
                            onClick: nextDay,
                            className: 'py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold rounded-xl text-lg lava-glow pulsing'
                        }, 'â­ Next Day'),
                        h('button', { 
                            onClick: payDebt,
                            className: 'py-4 bg-blue-600 text-white font-bold rounded-xl text-lg hover:bg-blue-500'
                        }, 'ðŸ’³ Pay Debt')
                    ),
                    
                    // LOG
                    h('div', { className: 'card' },
                        h('h3', { className: 'font-bold mb-2' }, 'ðŸ“œ Activity'),
                        h('div', { className: 'space-y-1 max-h-40 overflow-y-auto' },
                            log.map((msg, i) => 
                                h('p', { key: i, className: 'text-sm mono', style: { color: i === 0 ? 'var(--text)' : 'var(--text-muted)' } }, msg)
                            )
                        )
                    ),
                    
                    // === MODALS ===
                    
                    // Travel Modal
                    showModal === 'travel' && h('div', { className: 'modal-overlay', onClick: () => setShowModal(null) },
                        h('div', { className: 'modal-body animate__animated animate__fadeIn' },
                            h('h2', { className: 'text-2xl font-black mb-4 text-center lava-text' }, 'âœˆï¸ TRAVEL'),
                            h('div', { className: 'space-y-2' },
                                LOCATIONS.map(loc => 
                                    h('button', { 
                                        key: loc.name,
                                        onClick: () => { travel(loc); setShowModal(null); },
                                        className: 'w-full p-3 bg-gray-800 rounded-lg font-bold text-left hover:bg-gray-700 flex justify-between items-center'
                                    },
                                        h('span', null, loc.icon + ' ' + loc.name),
                                        h('span', { className: 'text-xs', style: { color: loc.risk > 0.3 ? 'var(--danger)' : 'var(--success)' } }, 
                                            'Risk: ' + (loc.risk * 100).toFixed(0) + '%'
                                        )
                                    )
                                )
                            ),
                            h('button', { onClick: () => setShowModal(null), className: 'w-full py-3 bg-gray-600 rounded-lg font-bold mt-4' }, 'Cancel')
                        )
                    ),
                    
                    // Upgrades Modal
                    showModal === 'upgrades' && h('div', { className: 'modal-overlay', onClick: () => setShowModal(null) },
                        h('div', { className: 'modal-body animate__animated animate__fadeIn' },
                            h('h2', { className: 'text-2xl font-black mb-4 text-center lava-text' }, 'ðŸ”§ UPGRADES'),
                            h('div', { className: 'space-y-2' },
                                Object.entries(UPGRADES).map(([key, upg]) => 
                                    h('div', { 
                                        key: key,
                                        className: 'upgrade-item p-3 bg-gray-800 rounded-lg flex justify-between items-center'
                                    },
                                        h('div', null,
                                            h('p', { className: 'font-bold' }, upg.name),
                                            h('p', { className: 'text-xs', style: { color: 'var(--text-muted)' } }, upg.description)
                                        ),
                                        h('button', { 
                                            onClick: () => buyUpgrade(key),
                                            className: 'px-4 py-2 bg-orange-500 rounded-lg font-bold text-sm',
                                            disabled: cash < upg.cost
                                        }, '$' + upg.cost)
                                    )
                                )
                            ),
                            h('button', { onClick: () => setShowModal(null), className: 'w-full py-3 bg-gray-600 rounded-lg font-bold mt-4' }, 'Close')
                        )
                    ),
                    
                    // Portfolio Modal
                    showModal === 'portfolio' && h('div', { className: 'modal-overlay', onClick: () => setShowModal(null) },
                        h('div', { className: 'modal-body animate__animated animate__fadeIn' },
                            h('h2', { className: 'text-2xl font-black mb-4 text-center lava-text' }, 'ðŸ“Š PORTFOLIO'),
                            Object.entries(portfolio).filter(([,q]) => q > 0).map(([sym, qty]) => 
                                h('div', { key: sym, className: 'flex justify-between py-2 border-b border-gray-700' },
                                    h('span', null, CRYPTOS[sym]?.icon + ' ' + sym),
                                    h('span', { className: 'mono' }, qty.toFixed(4) + ' ($' + (qty * prices[sym]).toFixed(0) + ')')
                                )
                            ),
                            Object.values(portfolio).every(v => v === 0) && h('p', { className: 'text-center py-4', style: { color: 'var(--text-muted)' } }, 'No holdings'),
                            h('div', { className: 'mt-4 pt-4 border-t border-gray-600' },
                                h('p', { className: 'flex justify-between' }, 
                                    h('span', null, 'Total:'), 
                                    h('span', { className: 'font-bold mono' }, '$' + getPortfolioValue().toFixed(0))
                                ),
                                h('p', { className: 'flex justify-between mt-2' }, 
                                    h('span', null, 'Wallet:'), 
                                    h('span', { className: 'font-bold mono' }, getTotalCrypto().toFixed(1) + ' / ' + getCapacity())
                                )
                            ),
                            h('button', { onClick: () => setShowModal(null), className: 'w-full py-3 bg-gray-600 rounded-lg font-bold mt-4' }, 'Close')
                        )
                    ),
                    
                    // Exchange Modal
                    showModal === 'exchange' && h('div', { className: 'modal-overlay', onClick: () => setShowModal(null) },
                        h('div', { className: 'modal-body animate__animated animate__fadeIn' },
                            h('h2', { className: 'text-2xl font-black mb-4 text-center lava-text' }, 'ðŸ¦ EXCHANGE'),
                            h('div', { className: 'space-y-2' },
                                EXCHANGES.map(ex => 
                                    h('button', { 
                                        key: ex.name,
                                        onClick: () => { setCurrentExchange(ex); addLog(`Switched to ${ex.name}`); setShowModal(null); },
                                        className: 'w-full p-3 bg-gray-800 rounded-lg font-bold text-left hover:bg-gray-700'
                                    },
                                        h('div', { className: 'flex justify-between' },
                                            h('span', null, ex.name),
                                            h('span', { className: 'text-sm', style: { color: ex.fee < 0.005 ? 'var(--success)' : 'var(--text-muted)' } }, (ex.fee * 100).toFixed(1) + '% fee')
                                        ),
                                        h('p', { className: 'text-xs', style: { color: 'var(--text-muted)' } }, ex.description)
                                    )
                                )
                            ),
                            h('button', { onClick: () => setShowModal(null), className: 'w-full py-3 bg-gray-600 rounded-lg font-bold mt-4' }, 'Cancel')
                        )
                    )
                )
            );
        }
        
        ReactDOM.createRoot(document.getElementById('root')).render(h(App));
    </script>
</body>
</html>
