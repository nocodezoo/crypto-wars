<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Wars ðŸ¦žðŸ”¥</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap">
    <style>
        :root {
            --bg: #0a0a0f;
            --card-bg: #12121a;
            --border: #1e1e2e;
            --primary: #ff6b35;
            --primary-glow: rgba(255, 107, 53, 0.4);
            --text: #e0e0e0;
            --text-muted: #6b6b7b;
            --success: #00ff88;
            --danger: #ff4488;
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Rajdhani', sans-serif; background: var(--bg); color: var(--text); }
        
        /* Header */
        .header { position: absolute; top: 0; left: 0; right: 140px; height: 60px; padding: 6px 10px; display: flex; align-items: center; gap: 8px; background: linear-gradient(180deg, #1a1a2e 0%, #12121a 100%); }
        .progress-ring { width: 44px; height: 44px; border-radius: 50%; background: conic-gradient(#ff6b35 var(--progress), #333 var(--progress)); display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(255,107,53,0.5); flex-shrink: 0; }
        .progress-inner { width: 34px; height: 34px; background: linear-gradient(135deg, #1a1a2e 0%, #12121a 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 800; }
        
        /* Event Area - THE STORY */
        .event-area { position: absolute; bottom: 150px; left: 0; right: 0; height: 85px; padding: 8px 12px; background: linear-gradient(180deg, #0a0a14 0%, #1a1a2e 100%); border-top: 3px solid #ff6b35; overflow-y: auto; scrollbar-width: none; }
        .event-area::-webkit-scrollbar { display: none; }
        .event-title { font-size: 16px; color: #ff6b35; font-weight: 700; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 1px; }
        .event-text { font-size: 13px; color: #aaa; line-height: 1.4; margin-bottom: 4px; }
        .event-highlight { color: #00ff88; font-weight: 600; }
        
        /* Wallet Display */
        .wallet-display { position: absolute; bottom: 50px; left: 0; right: 0; height: 100px; padding: 6px 10px; display: flex; flex-direction: column; background: linear-gradient(90deg, #2a1a3e 0%, #1a2a3e 100%); border-top: 3px solid #a29bfe; }
        .wallet-title { font-size: 16px; color: #a29bfe; font-weight: 700; margin-bottom: 4px; text-transform: uppercase; }
        .wallet-holdings { display: flex; gap: 8px; overflow-x: auto; }
        .wallet-coin { background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 6px; font-size: 16px; white-space: nowrap; }
        
        /* Crypto Grid */
        .crypto-area { position: absolute; left: 0; right: 140px; top: 60px; bottom: 240px; padding: 6px; overflow-y: auto; }
        .crypto-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; height: 100%; }
        .crypto-card { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 6px 4px; border-radius: 8px; background: linear-gradient(135deg, #2a2a3e 0%, #1e1e2e 100%); min-height: 60px; cursor: pointer; }
        .crypto-card:hover { border: 2px solid #ff6b35; transform: scale(1.02); }
        .coin-icon { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; margin-bottom: 2px; box-shadow: 0 0 10px currentColor; }
        .coin-symbol { font-weight: 700; font-size: 14px; }
        .coin-price { font-size: 12px; }
        .coin-change { font-size: 10px; font-weight: 600; }
        .price-up { color: #00ff88; text-shadow: 0 0 6px rgba(0,255,136,0.6); }
        .price-down { color: #ff4488; text-shadow: 0 0 6px rgba(255,68,136,0.6); }
        
        /* 8-BIT TERMINAL */
        .bit-terminal { position: absolute; right: 0; top: 0; bottom: 240px; width: 140px; background: #001a00; border-left: 3px solid #00ff00; padding: 8px; font-family: 'Courier New', monospace; font-size: 12px; color: #00ff00; overflow-y: auto; scrollbar-width: none; }
        .bit-terminal::-webkit-scrollbar { display: none; }
        .bit-title { text-align: center; border-bottom: 2px solid #00ff00; padding-bottom: 4px; margin-bottom: 6px; text-shadow: 0 0 10px #00ff00; font-weight: bold; font-size: 12px; }
        .bit-log-line { margin-bottom: 6px; line-height: 1.3; font-size: 10px; }
        .bit-stats { position: absolute; bottom: 8px; left: 8px; right: 8px; border-top: 2px solid #00ff00; padding-top: 4px; font-size: 10px; }
        
        /* Bottom Toolbar */
        .bottom-toolbar { position: absolute; bottom: 0; left: 0; right: 0; display: flex; justify-content: space-around; padding: 8px 6px; background: linear-gradient(180deg, #2a2a3e 0%, #1a1a2e 100%); border-top: 3px solid #ff6b35; }
        .toolbar-btn { padding: 8px 12px; border-radius: 8px; font-weight: 800; font-size: 9px; text-align: center; min-width: 50px; cursor: pointer; }
        .btn-travel { background: linear-gradient(135deg, #00b894, #00a884); color: #fff; box-shadow: 0 0 10px rgba(0,184,148,0.5); }
        .btn-upgrades { background: linear-gradient(135deg, #fdcb6e, #f39c12); color: #000; box-shadow: 0 0 10px rgba(253,203,110,0.5); }
        .btn-day { background: linear-gradient(135deg, #ff6b35, #ff8c42); color: #fff; box-shadow: 0 0 10px rgba(255,107,53,0.6); }
        .btn-exchange { background: linear-gradient(135deg, #74b9ff, #0984e3); color: #fff; box-shadow: 0 0 10px rgba(116,185,255,0.5); }
        .btn-defi { background: linear-gradient(135deg, #fd79a8, #e84393); color: #fff; box-shadow: 0 0 10px rgba(253,121,168,0.5); }
        
        /* Modals */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 100; }
        .modal-content { background: linear-gradient(135deg, #1a1a2e 0%, #12121a 100%); border: 2px solid #ff6b35; border-radius: 16px; padding: 20px; max-width: 90%; max-height: 80%; overflow-y: auto; }
        .modal-title { font-size: 20px; font-weight: 700; color: #ff6b35; margin-bottom: 16px; text-align: center; }
        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; color: #666; }
        
        /* Game Over Modal */
        .game-over { text-align: center; }
        .game-over h1 { font-size: 32px; color: #ff6b35; margin-bottom: 10px; }
        .game-over .stats { font-size: 18px; margin: 10px 0; }
        
        /* Trade Modal */
        .trade-input { width: 100%; padding: 10px; border: 2px solid #333; border-radius: 8px; background: #0a0a0f; color: #fff; font-size: 16px; margin: 10px 0; }
        .trade-btn { padding: 12px 24px; border-radius: 8px; font-weight: 700; font-size: 14px; margin: 5px; cursor: pointer; }
        .btn-buy { background: linear-gradient(135deg, #00ff88, #00cc6a); color: #000; }
        .btn-sell { background: linear-gradient(135deg, #ff4488, #cc2255); color: #fff; }
        
        .text-neon-orange { color: #ff6b35; text-shadow: 0 0 12px rgba(255,107,53,0.6); }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        const { useState, useEffect, useRef } = React;
        
        // === GAME CONSTANTS ===
        const GAME_DAYS = 30;
        const CRYPTOS = [
            { symbol: 'BTC', name: 'Bitcoin', icon: 'â‚¿', color: '#f7931a', price: 42000 },
            { symbol: 'ETH', name: 'Ethereum', icon: 'Îž', color: '#627eea', price: 2500 },
            { symbol: 'SOL', name: 'Solana', icon: 'â—Ž', color: '#00ffa3', price: 95 },
            { symbol: 'ADA', name: 'Cardano', icon: 'â‚³', color: '#0033ad', price: 0.55 },
            { symbol: 'DOGE', name: 'Dogecoin', icon: 'Ã', color: '#c2a633', price: 0.08 },
            { symbol: 'XRP', name: 'Ripple', icon: 'âœ•', color: '#23292f', price: 0.62 },
            { symbol: 'LINK', name: 'Chainlink', icon: 'â¬¡', color: '#375bd2', price: 15 },
            { symbol: 'UNI', name: 'Uniswap', icon: 'ðŸ¦„', color: '#ff007a', price: 7 },
            { symbol: 'DOT', name: 'Polkadot', icon: 'â—', color: '#e6007a', price: 7 },
            { symbol: 'AVAX', name: 'Avalanche', icon: 'â–²', color: '#e84142', price: 35 },
            { symbol: 'MATIC', name: 'Polygon', icon: 'â¬Ÿ', color: '#8247e5', price: 0.85 },
            { symbol: 'ATOM', name: 'Cosmos', icon: 'âš›', color: '#2e3148', price: 9 }
        ];
        
        const EXCHANGES = [
            { name: 'New York', multiplier: 1.0 },
            { name: 'Tokyo', multiplier: 1.1 },
            { name: 'London', multiplier: 1.05 },
            { name: 'Dubai', multiplier: 1.15 },
            { name: 'Singapore', multiplier: 1.08 },
            { name: 'Hong Kong', multiplier: 1.12 },
            { name: 'Berlin', multiplier: 0.95 },
            { name: 'Sao Paulo', multiplier: 0.9 }
        ];
        
        const UPGRADES = {
            whaleAlert: { name: 'Whale Alert', desc: 'See large trades', cost: 500 },
            diamondHands: { name: 'Diamond Hands', desc: '-20% sell pressure', cost: 1000 },
            fomoShield: { name: 'FOMO Shield', desc: '-30% event impact', cost: 800 },
            luckyCoin: { name: 'Lucky Coin', desc: '+10% gain chance', cost: 1500 },
            hodlMaster: { name: 'HODL Master', desc: 'Free daily hold', cost: 2000 },
            paperHands: { name: 'Paper Hands', desc: '+50% sell speed', cost: 600 },
            insider: { name: 'Insider Trading', desc: '+5% random bonus', cost: 2500 },
            liquidity: { name: 'Liquidity Boost', desc: 'Lower slippage', cost: 1200 }
        };
        
        const EVENTS = [
            { text: 'ðŸ‹ WHALE DUMP - A whale sells everything!', effect: 'all', value: -0.30 },
            { text: 'ðŸš€ BULL RUN - To the moon!', effect: 'all', value: 0.40 },
            { text: 'ðŸ“¢ ELON TWEETS - Elon tweets about crypto!', effect: 'random', value: 0.25 },
            { text: 'ðŸ“‰ BLOODBATH - Massive selloff!', effect: 'all', value: -0.40 },
            { text: 'ðŸ”Œ EXCHANGE DOWN - Maintenance!', effect: 'random', value: 0.20 },
            { text: 'ðŸ„ DEFI SUMMER - Returns!', effect: 'all', value: 0.30 },
            { text: 'ðŸ’° AIRDROP - Free tokens!', effect: 'cash', value: 500 },
            { text: 'ðŸ’Ž DIAMOND HANDS - HODL!', effect: 'all', value: 0.15 },
            { text: 'ðŸ• DOGE PUMP - Much wow!', effect: 'single', target: 'DOGE', value: 0.50 },
            { text: 'â„ï¸ WINTER IS COMING - Crypto winter!', effect: 'all', value: -0.25 }
        ];
        
        // === MAIN APP ===
        function App() {
            const [day, setDay] = useState(1);
            const [cash, setCash] = useState(5000);
            const [holdings, setHoldings] = useState({});
            const [prices, setPrices] = useState({});
            const [location, setLocation] = useState(EXCHANGES[0]);
            const [defiDebt, setDefiDebt] = useState(0);
            const [upgrades, setUpgrades] = useState({});
            const [logs, setLogs] = useState(['Day 1 started']);
            const [events, setEvents] = useState(['Welcome to Crypto Wars! Tap coins to trade.']);
            const [gameOver, setGameOver] = useState(false);
            const [modal, setModal] = useState(null); // 'trade', 'travel', 'upgrades', 'defi', 'gameover'
            const [tradeCrypto, setTradeCrypto] = useState(null);
            const [tradeType, setTradeType] = useState('buy');
            
            // Initialize prices
            useEffect(() => {
                const initialPrices = {};
                CRYPTOS.forEach(c => initialPrices[c.symbol] = c.price);
                setPrices(initialPrices);
            }, []);
            
            const addLog = (msg) => {
                setLogs(prev => [msg, ...prev].slice(0, 50));
            };
            
            const addEvent = (msg) => {
                setEvents(prev => [msg, ...prev].slice(0, 5));
            };
            
            const advanceDay = () => {
                if (day >= GAME_DAYS) {
                    setGameOver(true);
                    setModal('gameover');
                    return;
                }
                
                // Random price changes
                const newPrices = { ...prices };
                CRYPTOS.forEach(c => {
                    const change = (Math.random() - 0.5) * 0.2 * location.multiplier;
                    newPrices[c.symbol] = c.price * (1 + change);
                });
                setPrices(newPrices);
                
                // Random event
                if (Math.random() < 0.3) {
                    const event = EVENTS[Math.floor(Math.random() * EVENTS.length)];
                    addEvent(event.text);
                    addLog(event.text);
                    
                    if (event.effect === 'all') {
                        Object.keys(newPrices).forEach(sym => {
                            newPrices[sym] *= (1 + event.value);
                        });
                    } else if (event.effect === 'cash') {
                        setCash(c => c + event.value);
                    }
                }
                
                // Loan interest (0.5% daily)
                if (defiDebt > 0) {
                    setDefiDebt(d => d * 1.005);
                    addLog(`ðŸ’° DeFi interest: $${(defiDebt * 0.005).toFixed(2)}`);
                }
                
                setDay(d => d + 1);
                addLog(`Day ${day + 1} started`);
            };
            
            const handleCryptoClick = (crypto) => {
                setTradeCrypto(crypto);
                setTradeType('buy');
                setModal('trade');
            };
            
            const handleTrade = (amount) => {
                if (!tradeCrypto) return;
                const price = prices[tradeCrypto.symbol] * location.multiplier;
                
                if (tradeType === 'buy') {
                    const cost = amount * price;
                    if (cost > cash) {
                        addLog(`âŒ Not enough cash! Need $${cost.toFixed(2)}`);
                        return;
                    }
                    setCash(c => c - cost);
                    setHoldings(h => ({ ...h, [tradeCrypto.symbol]: (h[tradeCrypto.symbol] || 0) + amount }));
                    addLog(`âœ… Bought ${amount} ${tradeCrypto.symbol} for $${cost.toFixed(2)}`);
                } else {
                    const owned = holdings[tradeCrypto.symbol] || 0;
                    if (amount > owned) {
                        addLog(`âŒ Not enough ${tradeCrypto.symbol}!`);
                        return;
                    }
                    const revenue = amount * price;
                    setCash(c => c + revenue);
                    setHoldings(h => ({ ...h, [tradeCrypto.symbol]: owned - amount }));
                    addLog(`âœ… Sold ${amount} ${tradeCrypto.symbol} for $${revenue.toFixed(2)}`);
                }
                setModal(null);
            };
            
            const handleTravel = (loc) => {
                setLocation(loc);
                addLog(`âœˆï¸ Traveled to ${loc.name} (${loc.multiplier}x)`);
                setModal(null);
            };
            
            const handleBuyUpgrade = (key) => {
                const upgrade = UPGRADES[key];
                if (cash < upgrade.cost) {
                    addLog(`âŒ Not enough cash for ${upgrade.name}!`);
                    return;
                }
                setCash(c => c - upgrade.cost);
                setUpgrades(u => ({ ...u, [key]: true }));
                addLog(`âœ… Bought ${upgrade.name}!`);
            };
            
            const handleDefiBorrow = (amount) => {
                const collateral = amount * 1.5;
                if (collateral > cash) {
                    addLog(`âŒ Need $${collateral.toFixed(0)} collateral!`);
                    return;
                }
                setCash(c => c + amount);
                setDefiDebt(d => d + amount);
                addLog(`ðŸ¦ˆ Took $${amount} DeFi loan! Collateral: $${collateral.toFixed(0)}`);
                setModal(null);
            };
            
            const handleDefiPay = () => {
                const maxPay = Math.min(cash, defiDebt);
                if (maxPay <= 0) {
                    addLog(`âŒ No cash to pay debt!`);
                    return;
                }
                setCash(c => c - maxPay);
                setDefiDebt(d => d - maxPay);
                addLog(`âœ… Paid $${maxPay.toFixed(2)} of debt!`);
                setModal(null);
            };
            
            const getNetWorth = () => {
                let cryptoValue = 0;
                Object.entries(holdings).forEach(([sym, amt]) => {
                    cryptoValue += amt * (prices[sym] || 0) * location.multiplier;
                });
                return cash + cryptoValue - defiDebt;
            };
            
            // Render
            return h('div', { className: 'min-h-screen relative' },
                // Header
                h('div', { className: 'header' },
                    h('div', { className: 'progress-ring', style: { '--progress': (day/GAME_DAYS*100) + '%' } },
                        h('div', { className: 'progress-inner text-white' }, `${day}/${GAME_DAYS}`)
                    ),
                    h('div', null,
                        h('div', { className: 'text-lg font-bold text-neon-orange' }, 'CRYPTO WARS'),
                        h('div', { className: 'text-sm text-gray-400' }, location.name)
                    ),
                    h('div', { className: 'ml-auto text-right' },
                        h('div', { className: 'text-lg font-bold text-green-400' }, `$${cash.toFixed(0)}`),
                        h('div', { className: 'text-xs text-gray-500' }, 'cash')
                    )
                ),
                
                // Crypto Grid
                h('div', { className: 'crypto-area' },
                    h('div', { className: 'crypto-grid' },
                        CRYPTOS.map(crypto => {
                            const price = (prices[crypto.symbol] || crypto.price) * location.multiplier;
                            const change = ((price - crypto.price) / crypto.price * 100).toFixed(1);
                            return h('div', { key: crypto.symbol, className: 'crypto-card', onClick: () => handleCryptoClick(crypto) },
                                h('div', { className: 'coin-icon', style: { background: crypto.color, color: '#fff' } }, crypto.icon),
                                h('div', { className: 'coin-symbol text-white' }, crypto.symbol),
                                h('div', { className: 'coin-price text-white' }, '$' + (price < 1 ? price.toFixed(3) : price.toFixed(0))),
                                h('div', { className: 'coin-change ' + (change >= 0 ? 'price-up' : 'price-down') }, (change >= 0 ? '+' : '') + change + '%')
                            );
                        })
                    )
                ),
                
                // Story / Events
                h('div', { className: 'event-area' },
                    h('div', { className: 'event-title' }, 'THE STORY'),
                    events.map((e, i) => h('div', { key: i, className: 'event-text' }, e))
                ),
                
                // Wallet Holdings
                h('div', { className: 'wallet-display' },
                    h('div', { className: 'wallet-title' }, 'WALLET HOLDINGS'),
                    h('div', { className: 'wallet-holdings' },
                        Object.entries(holdings).filter(([_, amt]) => amt > 0).map(([sym, amt]) => 
                            h('div', { key: sym, className: 'wallet-coin', style: { color: CRYPTOS.find(c => c.symbol === sym)?.color } }, 
                                `${amt.toFixed(2)} ${sym}`
                            )
                        ),
                        Object.keys(holdings).filter(k => holdings[k] > 0).length === 0 && 
                            h('div', { className: 'wallet-coin', style: { color: '#666' } }, 'Empty')
                    )
                ),
                
                // 8-bit Terminal
                h('div', { className: 'bit-terminal' },
                    h('div', { className: 'bit-title' }, 'LOG'),
                    logs.slice(0, 8).map((log, i) => h('div', { key: i, className: 'bit-log-line' }, log)),
                    h('div', { className: 'bit-stats' },
                        h('div', { style: { color: '#00ff88' } }, `CASH: $${cash.toFixed(0)}`),
                        h('div', { style: { color: defiDebt > 0 ? '#ff4488' : '#666' } }, defiDebt > 0 ? `DEBT: $${defiDebt.toFixed(0)}` : 'DEBT: $0')
                    )
                ),
                
                // Bottom Toolbar
                h('div', { className: 'bottom-toolbar' },
                    h('div', { className: 'toolbar-btn btn-travel', onClick: () => setModal('travel') }, 'TRAVEL'),
                    h('div', { className: 'toolbar-btn btn-upgrades', onClick: () => setModal('upgrades') }, 'UPGRADES'),
                    h('div', { className: 'toolbar-btn btn-day', onClick: advanceDay }, 'DAY'),
                    h('div', { className: 'toolbar-btn btn-defi', onClick: () => setModal('defi') }, 'DEFI'),
                    h('div', { className: 'toolbar-btn btn-exchange', onClick: () => setModal('trade') }, 'EXCHANGE')
                ),
                
                // === MODALS ===
                
                // Trade Modal
                modal === 'trade' && h('div', { className: 'modal-overlay', onClick: () => setModal(null) },
                    h('div', { className: 'modal-content', onClick: e => e.stopPropagation() },
                        h('div', { className: 'modal-close', onClick: () => setModal(null) }, 'Ã—'),
                        h('div', { className: 'modal-title' }, tradeType === 'buy' ? 'ðŸ’° BUY CRYPTO' : 'ðŸ’¸ SELL CRYPTO'),
                        tradeCrypto && h('div', { style: { textAlign: 'center', marginBottom: '15px' } },
                            h('div', { style: { fontSize: '24px', fontWeight: 'bold', color: tradeCrypto.color }, }, tradeCrypto.symbol),
                            h('div', { style: { color: '#aaa' } }, `$${((prices[tradeCrypto.symbol] || tradeCrypto.price) * location.multiplier).toFixed(2)}`)
                        ),
                        h('div', { style: { display: 'flex', justifyContent: 'center', marginBottom: '15px' } },
                            h('button', { className: 'trade-btn btn-buy', onClick: () => setTradeType('buy') }, 'BUY'),
                            h('button', { className: 'trade-btn btn-sell', onClick: () => setTradeType('sell') }, 'SELL')
                        ),
                        tradeType === 'buy' ? 
                            h('button', { className: 'trade-btn btn-buy', style: { width: '100%' }, onClick: () => handleTrade(1) }, 
                                `Buy 1 ($${((prices[tradeCrypto?.symbol] || 0) * location.multiplier).toFixed(0)})`)
                        :
                            h('button', { className: 'trade-btn btn-sell', style: { width: '100%' }, onClick: () => handleTrade(holdings[tradeCrypto?.symbol] || 0) }, 
                                `Sell All (${(holdings[tradeCrypto?.symbol] || 0).toFixed(2)})`)
                    )
                ),
                
                // Travel Modal
                modal === 'travel' && h('div', { className: 'modal-overlay', onClick: () => setModal(null) },
                    h('div', { className: 'modal-content', onClick: e => e.stopPropagation() },
                        h('div', { className: 'modal-close', onClick: () => setModal(null) }, 'Ã—'),
                        h('div', { className: 'modal-title' }, 'âœˆï¸ TRAVEL TO...'),
                        h('div', { style: { display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '10px' } },
                            EXCHANGES.map(loc => 
                                h('div', { 
                                    key: loc.name,
                                    onClick: () => handleTravel(loc),
                                    style: { 
                                        padding: '15px', 
                                        background: location.name === loc.name ? '#ff6b35' : '#1a1a2e',
                                        borderRadius: '8px',
                                        cursor: 'pointer',
                                        textAlign: 'center'
                                    }
                                },
                                    h('div', { style: { fontWeight: 'bold' } }, loc.name),
                                    h('div', { style: { fontSize: '12px', color: location.name === loc.name ? '#fff' : '#aaa' } }, 
                                        loc.multiplier + 'x multiplier'
                                    )
                                )
                            )
                        )
                    )
                ),
                
                // Upgrades Modal
                modal === 'upgrades' && h('div', { className: 'modal-overlay', onClick: () => setModal(null) },
                    h('div', { className: 'modal-content', onClick: e => e.stopPropagation() },
                        h('div', { className: 'modal-close', onClick: () => setModal(null) }, 'Ã—'),
                        h('div', { className: 'modal-title' }, 'âš¡ UPGRADES'),
                        Object.entries(UPGRADES).map(([key, upg]) => 
                            h('div', { 
                                key: key,
                                style: { 
                                    padding: '12px', 
                                    background: upgrades[key] ? '#00ff8833' : '#1a1a2e',
                                    borderRadius: '8px',
                                    marginBottom: '8px',
                                    display: 'flex',
                                    justifyContent: 'space-between',
                                    alignItems: 'center'
                                }
                            },
                                h('div', null,
                                    h('div', { style: { fontWeight: 'bold' } }, upg.name),
                                    h('div', { style: { fontSize: '12px', color: '#aaa' } }, upg.desc)
                                ),
                                upgrades[key] ?
                                    h('div', { style: { color: '#00ff88', fontWeight: 'bold' } }, 'OWNED')
                                :
                                    h('button', { 
                                        onClick: () => handleBuyUpgrade(key),
                                        style: { 
                                            padding: '8px 16px', 
                                            background: cash >= upg.cost ? '#ff6b35' : '#333',
                                            border: 'none',
                                            borderRadius: '6px',
                                            color: '#fff',
                                            cursor: cash >= upg.cost ? 'pointer' : 'not-allowed'
                                        }
                                    }, `$${upg.cost}`)
                            )
                        )
                    )
                ),
                
                // Defi Modal
                modal === 'defi' && h('div', { className: 'modal-overlay', onClick: () => setModal(null) },
                    h('div', { className: 'modal-content', onClick: e => e.stopPropagation() },
                        h('div', { className: 'modal-close', onClick: () => setModal(null) }, 'Ã—'),
                        h('div', { className: 'modal-title' }, 'ðŸ¦ˆ DEFI LOAN SHARK'),
                        h('div', { style: { textAlign: 'center', marginBottom: '20px' } },
                            h('div', { style: { fontSize: '14px', color: '#aaa' } }, 'Current Debt'),
                            h('div', { style: { fontSize: '28px', color: '#ff4488', fontWeight: 'bold' } }, `$${defiDebt.toFixed(2)}`),
                            h('div', { style: { fontSize: '12px', color: '#666' } }, '0.5% daily interest â€¢ 150% collateral')
                        ),
                        h('div', { style: { display: 'flex', gap: '10px' } },
                            h('button', { 
                                className: 'trade-btn', 
                                style: { flex: 1, background: '#fd79a8' },
                                onClick: () => handleDefiBorrow(Math.floor(cash * 0.5))
                            }, 'ðŸ¦ˆ BORROW'),
                            h('button', { 
                                className: 'trade-btn', 
                                style: { flex: 1, background: defiDebt > 0 ? '#00ff88' : '#333', color: defiDebt > 0 ? '#000' : '#666' },
                                onClick: handleDefiPay,
                                disabled: defiDebt <= 0
                            }, 'ðŸ’° PAY OFF')
                        )
                    )
                ),
                
                // Game Over Modal
                modal === 'gameover' && h('div', { className: 'modal-overlay' },
                    h('div', { className: 'modal-content game-over' },
                        h('h1', null, 'ðŸ”¥ GAME OVER ðŸ”¥'),
                        h('div', { className: 'stats' }, `Survived ${day} days`),
                        h('div', { className: 'stats', style: { color: getNetWorth() >= 0 ? '#00ff88' : '#ff4488' } }, 
                            `Net Worth: $${getNetWorth().toFixed(2)}`
                        ),
                        h('button', { 
                            className: 'trade-btn btn-buy', 
                            onClick: () => window.location.reload()
                        }, 'ðŸ”„ PLAY AGAIN')
                    )
                )
            );
        }
        
        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(h(App));
    </script>
</body>
</html>
